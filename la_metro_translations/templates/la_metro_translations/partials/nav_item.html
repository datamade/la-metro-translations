{% load wagtailcore_tags %}

{% if not menuitem.get_children %}
  <li class="nav-item">
    <a
      class="nav-link"
      href="{% slugurl menuitem.slug %}">
      {{ menuitem.title }}
    </a>
  </li>
{% else %}
  <li class="nav-item dropdown">
    <a
      class="nav-link dropdown-toggle"
      href="#"
      id="navbarDropdown-{{ forloop.counter }}"
      role="button"
      data-bs-toggle="dropdown"
      aria-haspopup="true"
      aria-expanded="false"
    >{{ menuitem.title }}</a>
    <ul
      class="dropdown-menu dropdown-menu-right"
      aria-labelledby="navbarDropdown-{{ forloop.counter }}">
      <a
        class="dropdown-item"
        href="{% slugurl menuitem.slug %}"
      >Overview</a>
      {% for child in menuitem.get_children.live.in_menu %}
        <a class="dropdown-item" href="{% slugurl child.slug %}">{{ child.title }}</a>
      {% endfor %}
    </ul>
  </li>
{% endif %}
